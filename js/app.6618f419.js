(function(){"use strict";var e={6804:function(e,t,s){var r=s(4976),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("h1",[e._v("After School Activity")]),t("button",{staticClass:"cart",attrs:{disabled:e.cart.length<1&&"CheckoutComponent"!==e.rendered},on:{click:function(t){return e.switchPage()}}},[t("h3",[e._v("Cart")]),t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[t("path",{attrs:{d:"M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"}})]),t("p",[e._v(e._s(e.cart.length)+" ")])]),"LessonComponent"===e.rendered?t("div",{staticClass:"search-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"search",placeholder:"Type to Search Lessons"},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}})]):e._e(),t(e.rendered,{tag:"component",attrs:{lessons:e.lessons,server:e.apiServer,searchResults:e.searchResults,searchText:e.searchText,cart:e.cart},on:{"add-item-to-cart":e.addToCart,"remove-item-from-cart":e.removeFromCart}})],1)},o=[],a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lessonPage"},[t("div",{staticClass:"sort-section"},[t("div",{staticClass:"sort-type"},[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sortType,expression:"sortType"}],attrs:{type:"radio",name:"sort",value:"topic",id:"option1"},domProps:{checked:e._q(e.sortType,"topic")},on:{change:function(t){e.sortType="topic"}}}),e._v(" "),t("label",{attrs:{for:"option1"}},[e._v("Subject")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sortType,expression:"sortType"}],attrs:{type:"radio",name:"sort",value:"location",id:"option2"},domProps:{checked:e._q(e.sortType,"location")},on:{change:function(t){e.sortType="location"}}}),e._v(" "),t("label",{attrs:{for:"option2"}},[e._v("Location")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sortType,expression:"sortType"}],attrs:{type:"radio",name:"sort",value:"price",id:"option3"},domProps:{checked:e._q(e.sortType,"price")},on:{change:function(t){e.sortType="price"}}}),e._v(" "),t("label",{attrs:{for:"option3"}},[e._v("Price")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sortType,expression:"sortType"}],attrs:{type:"radio",name:"sort",value:"spaces",id:"option4"},domProps:{checked:e._q(e.sortType,"spaces")},on:{change:function(t){e.sortType="spaces"}}}),e._v(" "),t("label",{attrs:{for:"option4"}},[e._v("Spaces")])])]),t("div",{staticClass:"sort-mode"},[t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",name:"mode",value:"descending",id:"descending"},domProps:{checked:e._q(e.mode,"descending")},on:{change:function(t){e.mode="descending"}}}),e._v(" "),t("label",{attrs:{for:"descending"}},[e._v("Descending")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{type:"radio",name:"mode",value:"ascending",id:"ascending"},domProps:{checked:e._q(e.mode,"ascending")},on:{change:function(t){e.mode="ascending"}}}),e._v(" "),t("label",{attrs:{for:"ascending"}},[e._v("Ascending")])])])]),t("div",[e.searchText.length>0?t("div",{staticClass:"lesson-container"},e._l(e.searchResults,(function(s,r){return t("div",{key:r,staticClass:"image-card"},[t("div",{staticClass:"card-image"},[t("img",{attrs:{src:e.server+s.image}})]),t("div",{staticClass:"card-text"},e._l(s,(function(s,r){return["_id","image"].includes(r)?e._e():t("div",{key:r},[t("h4","price"===r?[e._v(e._s(r)+": $"+e._s(s))]:[e._v(e._s(r)+": "+e._s(s))])])})),0),t("div",{staticClass:"card-button"},[t("button",{attrs:{disabled:s.spaces<1},on:{click:function(t){return e.addToCart(s)}}},[e._v("Add to cart")])])])})),0):t("div",{staticClass:"lesson-container"},e._l(e.sortedLessons,(function(s,r){return t("div",{key:r,staticClass:"image-card"},[t("div",{staticClass:"card-image"},[t("img",{attrs:{src:e.server+s.image}})]),t("div",{staticClass:"card-text"},e._l(s,(function(s,r){return["_id","image"].includes(r)?e._e():t("div",{key:r},[t("h4","price"===r?[e._v(e._s(r)+": $"+e._s(s))]:[e._v(e._s(r)+": "+e._s(s))])])})),0),t("div",{staticClass:"card-button"},[t("button",{attrs:{disabled:s.spaces<1},on:{click:function(t){return e.addToCart(s)}}},[e._v("Add to cart")])])])})),0)])])},i=[],c={name:"HelloWorld",props:["lessons","server","searchText","searchResults"],data(){return{sortType:"topic",mode:"ascending"}},methods:{addToCart(e){this.$emit("add-item-to-cart",e)}},computed:{sortedLessons:function(){let e="ascending"===this.mode?1:-1;return this.lessons?.slice().sort(((t,s)=>"string"===typeof t[this.sortType]&&"string"===typeof s[this.sortType]?e*t[this.sortType].localeCompare(s[this.sortType]):e*(t[this.sortType]-s[this.sortType])))}}},d=c,l=s(2528),u=(0,l.c)(d,a,i,!1,null,null,null),p=u.exports;const h="http://localhost:5000",m="https://cw-lessons.eu-north-1.elasticbeanstalk.com",v=`${m}/api/v1`,f=async()=>{const e=await fetch(`${v}/lessons`),t=await e.json();return e.ok||alert("an error occurred while fetching"),t.lessons},g=async e=>{const t=await fetch(`${v}/lessons/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"}}),s=await t.json();return s},_=async e=>{console.log(e);const t=await fetch(`${v}/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();return s.success||alert(s.message),s},y=async e=>{const t=await fetch(`${v}/search?q=${e}`),s=await t.json();return s.success?s.result:[]};var w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"shoppingCartPage"},[t("div",{staticClass:"cart-container"},e._l(e.cart,(function(s,r){return t("div",{key:r,staticClass:"image-card"},[t("div",{staticClass:"card-image"},[t("img",{attrs:{src:e.server+s.image}})]),t("div",{staticClass:"card-text"},e._l(s,(function(s,r){return["_id","image"].includes(r)?e._e():t("div",{key:r},[t("h4","price"===r?[e._v(e._s(r)+": $"+e._s(s))]:[e._v(e._s(r)+": "+e._s(s))])])})),0),t("div",{staticClass:"card-button"},[t("button",{attrs:{disabled:s.spaces<1},on:{click:function(t){return e.removeFromCart(s)}}},[e._v("Remove")])])])})),0),t("div",{staticClass:"checkout-container"},[e._m(0),t("form",[t("div",[t("label",{attrs:{for:"name"}},[e._v("Name :")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.order.name,expression:"order.name"}],attrs:{id:"name",type:"phone"},domProps:{value:e.order.name},on:{input:function(t){t.target.composing||e.$set(e.order,"name",t.target.value)}}})]),t("div",[t("label",{attrs:{for:"name"}},[e._v("Phone:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.order.phone,expression:"order.phone"}],attrs:{id:"name",type:"text"},domProps:{value:e.order.phone},on:{input:function(t){t.target.composing||e.$set(e.order,"phone",t.target.value)}}})])]),t("div",{staticClass:"checkout-button"},[t("button",{attrs:{disabled:e.isCheckoutDisabled},on:{click:e.completeCheckout}},[e._v(" Checkout Order ")])]),!0===e.isCheckoutDisabled?t("p",[e._v(" "+e._s(e.order.errorMessage)+" ")]):e._e()])])])},C=[function(){var e=this,t=e._self._c;return t("section",[t("h1",[e._v(" Checkout")])])}],b={name:"Checkout-component",props:["cart","server"],data(){return{order:{name:"",phone:"",errorMessage:"sss"}}},methods:{removeFromCart(e){this.$emit("remove-item-from-cart",e)},completeCheckout:async function(){const e=await _({name:this.order.name,phoneNumber:this.order.phone,lessonIds:this.cart,spaces:this.cart.reduce(((e,t)=>e+t.spaces),0)});e&&(alert(`Order with the ID ${e.newOrder.insertedId} was ${e.message}`),g(e.newOrder.insertedId).then((e=>{alert(e.message)})))}},computed:{isCheckoutDisabled:function(){let e=this.order.name.trim().length>0&&/^[A-Za-z\s]*$/.test(this.order.name),t=this.order.phone.trim().length>0&&/^[0-9]*$/.test(this.order.phone),s=!(t&&e);return 0===this.cart.length?(s=!0,this.order.errorMessage="cart is empty",s):(this.order.errorMessage="please enter a valid name and phone number",s)}}},T=b,k=(0,l.c)(T,w,C,!1,null,"25129a44",null),x=k.exports,$={name:"App",data(){return{cart:[],lessons:[],apiServer:m||h,query:"",searchText:"",searchResults:[],rendered:"LessonComponent"}},watch:{searchText:function(e){e.length>0?this.searchLessons():this.searchResults=[]}},methods:{switchPage(){"LessonComponent"===this.rendered?this.rendered="CheckoutComponent":this.rendered="LessonComponent"},async searchLessons(){if(this.searchText.length>0)try{const e=await y(this.searchText);this.searchResults=e}catch(e){console.error("Error fetching data:",e),this.searchResults=[]}else this.searchResults=[]},addToCart:function(e){let t=this.cart.find((t=>t._id===e._id));t?t.spaces+=1:this.cart=[...this.cart,{...e,spaces:1}],e.spaces--},removeFromCart:function(e){let t=this.lessons.find((t=>t._id===e._id));e.spaces<=1?this.cart=this.cart.filter((t=>t._id!==e._id)):e.spaces-=1,t.spaces+=1}},mounted(){f().then((e=>{this.lessons=e}))},components:{LessonComponent:p,CheckoutComponent:x}},N=$,P=(0,l.c)(N,n,o,!1,null,null,null),O=P.exports,j=s(6364);(0,j.s)("/cw3-pwa/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var A=s(8188),S=s(9800),q=s(472),L=s(6066),R=s(9100);(0,A.AR)([].concat(self.__WB_MANIFEST||[])),(0,q.g5)(/^https:\/\/cdn\.jsdelivr\.net\/npm\/vue@\d+\.\d+\.\d+\/dist\/vue\.js$/,new S.S8({cacheName:"vue-library-cache"})),(0,q.g5)(/^https:\/\/cw-lessons\.eu-north-1\.elasticbeanstalk\.com\/images\/(.*)$/,new S.S8({cacheName:"api-images-cache",plugins:[new L.w({statuses:[200]}),new R.c({maxEntries:50,maxAgeSeconds:604800})]})),(0,q.g5)(/^https:\/\/cw-lessons\.eu-north-1\.elasticbeanstalk\.com\/api\/v1\/lessons$/,new S.qG({cacheName:"api-data-cache",plugins:[new L.w({statuses:[200]}),new R.c({maxEntries:50,maxAgeSeconds:3600})]})),(0,q.g5)((({request:e})=>"script"===e.destination||"style"===e.destination||"document"===e.destination||"image"===e.destination),new S.qG({cacheName:"app-cache"})),r.cp.config.productionTip=!1,new r.cp({render:e=>e(O)}).$mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,o){if(!r){var a=1/0;for(l=0;l<e.length;l++){r=e[l][0],n=e[l][1],o=e[l][2];for(var i=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[c])}))?r.splice(c--,1):(i=!1,o<a&&(a=o));if(i){e.splice(l--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,a=r[0],i=r[1],c=r[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var l=c(s)}for(t&&t(r);d<a.length;d++)o=a[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(l)},r=self["webpackChunkcw3_pwa"]=self["webpackChunkcw3_pwa"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[999],(function(){return s(6804)}));r=s.O(r)})();
//# sourceMappingURL=app.6618f419.js.map